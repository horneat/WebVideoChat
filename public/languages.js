const languages = {
    en: {
        // Lounge translations
        loungeTitle: "WebChat Lounge",
        loungeSubtitle: "Connect with friends and family through secure video calls",
        createNewRoom: "Create New Room",
        rejoinRoom: "Rejoin Room",
        joinRoom: "Join Room",
        enterRoomId: "Please enter a room ID",
        invalidRoomId: "Invalid room ID format",
        roomNotFound: "Room not found. Please create a new room or check the room ID.",
        conversationEnded: "The conversation has ended. You can create a new room or rejoin if available.",
        availableRooms: "Available Rooms",
        noRoomsAvailable: "No active rooms available. Create one!",
        activeRooms: "Active Rooms",
        activeUsers: "Active Users",
        howToUse: "How to use:",
        instruction1: "Click 'Create New Room' to start a video call",
        instruction2: "Share the room link with your friends",
        instruction3: "Allow camera and microphone access when prompted",
        instruction4: "Start your video conversation!",

        // Video Chat translations
        partner: "Partner",
        waitingPartner: "Waiting for partner...",
        you: "You",
        mute: "Mute Partner",
        unmute: "Unmute Partner",
        muteSelf: "Mute My Audio",
        unmuteSelf: "Unmute My Audio",
        stopVideo: "Stop Video",
        startVideo: "Start Video",
        quality: "Quality",
        balanced: "Balanced",
        highQuality: "High Quality",
        lowBandwidth: "Low Bandwidth",
        copyLink: "Copy Link",
        leaveRoom: "Leave Room",
        endCall: "End Call",
        chatPlaceholder: "Type a message...",
        send: "Send",
        linkCopied: "Link copied to clipboard!",
        partnerDisconnected: "Partner disconnected",
        errorMediaAccess: "Cannot access camera/microphone. Please check permissions.",

        // Connection status
        connecting: "Connecting...",
        connected: "Connected",
        reconnecting: "Reconnecting...",
        disconnected: "Disconnected",

        // System messages
        videoStopped: "Video stopped",
        videoStarted: "Video started",

        // Room creation translations
        // New translations for room creation
        createRoom: "Create Room",
        roomName: "Room Name",
        enterRoomName: "Enter room name",
        secretRoom: "Make this a secret room (won't appear in public list)",
        cancel: "Cancel",
        roomNotFound: "Room not found. Please check the room ID or create a new room."
    },
    ru: {
        // Lounge translations
        loungeTitle: "WebChat Лаунж",
        loungeSubtitle: "Общайтесь с друзьями и семьей через безопасные видеозвонки",
        createNewRoom: "Создать новую комнату",
        rejoinRoom: "Вернуться в комнату",
        joinRoom: "Присоединиться",
        enterRoomId: "Пожалуйста, введите ID комнаты",
        invalidRoomId: "Неверный формат ID комнаты",
        roomNotFound: "Комната не найдена. Создайте новую комнату или проверьте ID комнаты.",
        conversationEnded: "Разговор завершен. Вы можете создать новую комнату или вернуться, если она доступна.",
        availableRooms: "Доступные комнаты",
        noRoomsAvailable: "Нет активных комнат. Создайте одну!",
        activeRooms: "Активные комнаты",
        activeUsers: "Активные пользователи",
        howToUse: "Как использовать:",
        instruction1: "Нажмите 'Создать новую комнату' для начала видеозвонка",
        instruction2: "Поделитесь ссылкой на комнату с друзьями",
        instruction3: "Разрешите доступ к камере и микрофону при запросе",
        instruction4: "Начните видеозвонок!",

        // Video Chat translations
        partner: "Партнер",
        waitingPartner: "Ожидание партнера...",
        you: "Вы",
        mute: "Заглушить партнера",
        unmute: "Включить звук партнера",
        muteSelf: "Заглушить себя",
        unmuteSelf: "Включить свой звук",
        stopVideo: "Выключить видео",
        startVideo: "Включить видео",
        quality: "Качество",
        balanced: "Сбалансировано",
        highQuality: "Высокое качество",
        lowBandwidth: "Низкая пропускная способность",
        copyLink: "Копировать ссылку",
        leaveRoom: "Покинуть комнату",
        endCall: "Завершить звонок",
        chatPlaceholder: "Введите сообщение...",
        send: "Отправить",
        linkCopied: "Ссылка скопирована в буфер!",
        partnerDisconnected: "Партнер отключился",
        errorMediaAccess: "Не удается получить доступ к камере/микрофону. Проверьте разрешения.",

        // Connection status
        connecting: "Подключение...",
        connected: "Подключено",
        reconnecting: "Переподключение...",
        disconnected: "Отключено",

        // System messages
        videoStopped: "Видео остановлено",
        videoStarted: "Видео запущено",

        // New translations for room creation
        createRoom: "Создать комнату",
        roomName: "Название комнаты",
        enterRoomName: "Введите название комнаты",
        secretRoom: "Сделать секретной комнатой (будет скрыта в списке)",
        cancel: "Отменить",
        roomNotFound: "Комната не найдена. Пожалуйста, проверьте идентификатор комнаты или создайте новую комнату."

    },
    tr: {
        // Lounge translations
        loungeTitle: "WebChat Bekleme Salonu",
        loungeSubtitle: "Güvenli video görüşmeleri ile arkadaşlarınız ve ailenizle bağlantı kurun",
        createNewRoom: "Yeni Oda Oluştur",
        rejoinRoom: "Odaya Yeniden Katıl",
        joinRoom: "Odaya Katıl",
        enterRoomId: "Lütfen bir oda ID'si girin",
        invalidRoomId: "Geçersiz oda ID formatı",
        roomNotFound: "Oda bulunamadı. Lütfen yeni bir oda oluşturun veya oda ID'sini kontrol edin.",
        conversationEnded: "Görüşme sona erdi. Yeni bir oda oluşturabilir veya uygun olduğunda yeniden katılabilirsiniz.",
        availableRooms: "Mevcut Odalar",
        noRoomsAvailable: "Aktif oda yok. Bir tane oluşturun!",
        activeRooms: "Aktif Odalar",
        activeUsers: "Aktif Kullanıcılar",
        howToUse: "Nasıl kullanılır:",
        instruction1: "Video görüşmesi başlatmak için 'Yeni Oda Oluştur'u tıklayın",
        instruction2: "Oda bağlantısını arkadaşlarınızla paylaşın",
        instruction3: "İstendiğinde kamera ve mikrofon erişimine izin verin",
        instruction4: "Video görüşmenize başlayın!",

        // Video Chat translations
        partner: "Partner",
        waitingPartner: "Partner bekleniyor...",
        you: "Siz",
        mute: "Partneri Sessize Al",
        unmute: "Partner Sesini Aç",
        muteSelf: "Sesimi Kapat",
        unmuteSelf: "Sesimi Aç",
        stopVideo: "Videoyu Durdur",
        startVideo: "Videoyu Başlat",
        quality: "Kalite",
        balanced: "Dengeli",
        highQuality: "Yüksek Kalite",
        lowBandwidth: "Düşük Bant Genişliği",
        copyLink: "Bağlantıyı Kopyala",
        leaveRoom: "Odadan Ayrıl",
        endCall: "Görüşmeyi Sonlandır",
        chatPlaceholder: "Mesaj yazın...",
        send: "Gönder",
        linkCopied: "Bağlantı panoya kopyalandı!",
        partnerDisconnected: "Partner bağlantısı kesildi",
        errorMediaAccess: "Kamera/mikrofona erişilemiyor. Lütfen izinleri kontrol edin.",

        // Connection status
        connecting: "Bağlanılıyor...",
        connected: "Bağlandı",
        reconnecting: "Yeniden bağlanılıyor...",
        disconnected: "Bağlantı kesildi",

        // System messages
        videoStopped: "Video durduruldu",
        videoStarted: "Video başlatıldı"
    },
    es: {
        // Lounge translations
        loungeTitle: "Sala de Espera WebChat",
        loungeSubtitle: "Conéctate con amigos y familiares a través de videollamadas seguras",
        createNewRoom: "Crear Nueva Sala",
        rejoinRoom: "Reunirse a la Sala",
        joinRoom: "Unirse a la Sala",
        enterRoomId: "Por favor ingrese un ID de sala",
        invalidRoomId: "Formato de ID de sala inválido",
        roomNotFound: "Sala no encontrada. Por favor cree una nueva sala o verifique el ID de la sala.",
        conversationEnded: "La conversación ha terminado. Puede crear una nueva sala o reunirse si está disponible.",
        availableRooms: "Salas Disponibles",
        noRoomsAvailable: "No hay salas activas disponibles. ¡Crea una!",
        activeRooms: "Salas Activas",
        activeUsers: "Usuarios Activos",
        howToUse: "Cómo usar:",
        instruction1: "Haga clic en 'Crear Nueva Sala' para iniciar una videollamada",
        instruction2: "Comparta el enlace de la sala con sus amigos",
        instruction3: "Permita el acceso a cámara y micrófono cuando se solicite",
        instruction4: "¡Comience su conversación de video!",

        // Video Chat translations
        partner: "Compañero",
        waitingPartner: "Esperando al compañero...",
        you: "Tú",
        mute: "Silenciar Compañero",
        unmute: "Activar Sonido Compañero",
        muteSelf: "Silenciar Mi Audio",
        unmuteSelf: "Activar Mi Audio",
        stopVideo: "Detener Video",
        startVideo: "Iniciar Video",
        quality: "Calidad",
        balanced: "Equilibrado",
        highQuality: "Alta Calidad",
        lowBandwidth: "Bajo Ancho de Banda",
        copyLink: "Copiar Enlace",
        leaveRoom: "Salir de la Sala",
        endCall: "Terminar Llamada",
        chatPlaceholder: "Escribe un mensaje...",
        send: "Enviar",
        linkCopied: "¡Enlace copiado al portapapeles!",
        partnerDisconnected: "Compañero desconectado",
        errorMediaAccess: "No se puede acceder a la cámara/micrófono. Por favor verifique los permisos.",

        // Connection status
        connecting: "Conectando...",
        connected: "Conectado",
        reconnecting: "Reconectando...",
        disconnected: "Desconectado",

        // System messages
        videoStopped: "Video detenido",
        videoStarted: "Video iniciado"
    },
    fr: {
        // Lounge translations
        loungeTitle: "Salon d'Attente WebChat",
        loungeSubtitle: "Connectez-vous avec vos amis et votre famille via des appels vidéo sécurisés",
        createNewRoom: "Créer une Nouvelle Salle",
        rejoinRoom: "Rejoindre la Salle",
        joinRoom: "Rejoindre la Salle",
        enterRoomId: "Veuillez saisir un ID de salle",
        invalidRoomId: "Format d'ID de salle invalide",
        roomNotFound: "Salle non trouvée. Veuillez créer une nouvelle salle ou vérifier l'ID de la salle.",
        conversationEnded: "La conversation est terminée. Vous pouvez créer une nouvelle salle ou la rejoindre si elle est disponible.",
        availableRooms: "Salles Disponibles",
        noRoomsAvailable: "Aucune salle active disponible. Créez-en une !",
        activeRooms: "Salles Actives",
        activeUsers: "Utilisateurs Actifs",
        howToUse: "Comment utiliser :",
        instruction1: "Cliquez sur 'Créer une Nouvelle Salle' pour démarrer un appel vidéo",
        instruction2: "Partagez le lien de la salle avec vos amis",
        instruction3: "Autorisez l'accès à la caméra et au microphone lorsqu'il est demandé",
        instruction4: "Commencez votre conversation vidéo !",

        // Video Chat translations
        partner: "Partenaire",
        waitingPartner: "En attente du partenaire...",
        you: "Vous",
        mute: "Muet le Partenaire",
        unmute: "Activer le Son du Partenaire",
        muteSelf: "Me Rendre Muet",
        unmuteSelf: "Activer Mon Micro",
        stopVideo: "Arrêter la Vidéo",
        startVideo: "Démarrer la Vidéo",
        quality: "Qualité",
        balanced: "Équilibré",
        highQuality: "Haute Qualité",
        lowBandwidth: "Faible Bande Passante",
        copyLink: "Copier le Lien",
        leaveRoom: "Quitter la Salle",
        endCall: "Terminer l'Appel",
        chatPlaceholder: "Tapez un message...",
        send: "Envoyer",
        linkCopied: "Lien copié dans le presse-papiers !",
        partnerDisconnected: "Partenaire déconnecté",
        errorMediaAccess: "Impossible d'accéder à la caméra/au microphone. Veuillez vérifier les autorisations.",

        // Connection status
        connecting: "Connexion...",
        connected: "Connecté",
        reconnecting: "Reconnexion...",
        disconnected: "Déconnecté",

        // System messages
        videoStopped: "Vidéo arrêtée",
        videoStarted: "Vidéo démarrée"
    }
};

// Initialize language manager
class LanguageManager {
    constructor() {
        this.currentLanguage = 'en';
        this.loadLanguage();
    }

    loadLanguage() {
        const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
        this.changeLanguage(savedLanguage);
    }

    changeLanguage(lang) {
        this.currentLanguage = lang;
        localStorage.setItem('preferredLanguage', lang);

        // Update all elements with data-i18n attribute
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (languages[lang] && languages[lang][key]) {
                element.textContent = languages[lang][key];
            }
        });

        // Update placeholders
        const chatInput = document.getElementById('chatInput');
        if (chatInput) {
            chatInput.placeholder = this.translate('chatPlaceholder');
        }

        const roomIdInput = document.getElementById('roomIdInput');
        if (roomIdInput) {
            roomIdInput.placeholder = this.translate('enterRoomId');
        }

        // Update video chat controls if available
        if (window.currentVideoChat) {
            window.currentVideoChat.updateControlTexts();
        }
    }

    translate(key) {
        return languages[this.currentLanguage]?.[key] || key;
    }
}

// Initialize global language manager
window.languageManager = new LanguageManager();
